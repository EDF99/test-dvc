schema: '2.0'
stages:
  preprocess_data:
    cmd: python src/preprocess.py --config=params.yaml
    deps:
    - path: datasets/raw/chimi_text_dataset.csv
      hash: md5
      md5: 94aee0544032aa63f0b5a10613ba6ec7
      size: 124677
    - path: src/preprocess.py
      hash: md5
      md5: a96980a4f074c5f5c5abfe605f3a5abc
      size: 2183
    params:
      params.yaml:
        base:
          seed: 42
          base_model_path: models/base-spa-mt5
        data:
          raw_dataset: datasets/raw/chimi_text_dataset.csv
          preprocessed_dataset: datasets/preprocessed/preprocessed_chimi_text_dataset
          validation_and_test_size: 0.1
    outs:
    - path: datasets/preprocessed/preprocessed_chimi_text_dataset
      hash: md5
      md5: 33797bda27bf3fe480551cb1bdee1790.dir
      size: 460215
      nfiles: 10
  train_model:
    cmd: python src/train.py --config=params.yaml
    deps:
    - path: datasets/preprocessed/preprocessed_chimi_text_dataset
      hash: md5
      md5: 33797bda27bf3fe480551cb1bdee1790.dir
      size: 460215
      nfiles: 10
    - path: models/base-spa-mt5
      hash: md5
      md5: a2ca8ba1f6589e3fc0917596b4382e4c.dir
      size: 978096281
      nfiles: 6
    - path: src/train.py
      hash: md5
      md5: 1cb0fadb4408abf98a4eb04f2bd467ae
      size: 2970
    params:
      params.yaml:
        base:
          seed: 42
          base_model_path: models/base-spa-mt5
        data:
          raw_dataset: datasets/raw/chimi_text_dataset.csv
          preprocessed_dataset: datasets/preprocessed/preprocessed_chimi_text_dataset
          validation_and_test_size: 0.1
        train:
          epochs: 1
          batch_size: 4
          trained_model_path: models/chimi-text-model
    outs:
    - path: models/chimi-text-model
      hash: md5
      md5: 6e679d273a00daea9bce815ad4ac1471.dir
      size: 978042823
      nfiles: 7
  evaluate_model:
    cmd: python src/eval.py --config=params.yaml
    deps:
    - path: datasets/preprocessed/preprocessed_chimi_text_dataset
      hash: md5
      md5: 33797bda27bf3fe480551cb1bdee1790.dir
      size: 460215
      nfiles: 10
    - path: models/chimi-text-model
      hash: md5
      md5: 6e679d273a00daea9bce815ad4ac1471.dir
      size: 978042823
      nfiles: 7
    - path: src/eval.py
      hash: md5
      md5: 980d8cea51925c5b39983fc108fc611a
      size: 1836
    params:
      params.yaml:
        base:
          seed: 42
          base_model_path: models/base-spa-mt5
        data:
          raw_dataset: datasets/raw/chimi_text_dataset.csv
          preprocessed_dataset: datasets/preprocessed/preprocessed_chimi_text_dataset
          validation_and_test_size: 0.1
        train:
          epochs: 1
          batch_size: 4
          trained_model_path: models/chimi-text-model
    outs:
    - path: reports/metrics.json
      hash: md5
      md5: fff29778058826692d78528d79c885e3
      size: 410
