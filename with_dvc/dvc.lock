schema: '2.0'
stages:
  preprocess_data:
    cmd: python src/preprocess.py --config=params.yaml
    deps:
    - path: datasets/raw/chimi_text_dataset.csv
      hash: md5
      md5: 94aee0544032aa63f0b5a10613ba6ec7
      size: 124677
    - path: src/preprocess.py
      hash: md5
      md5: a96980a4f074c5f5c5abfe605f3a5abc
      size: 2183
    params:
      params.yaml:
        base:
          seed: 42
          base_model_path: models/base-spa-mt5
        data:
          raw_dataset: datasets/raw/chimi_text_dataset.csv
          preprocessed_dataset: datasets/preprocessed/preprocessed_chimi_text_dataset
          validation_and_test_size: 0.1
    outs:
    - path: datasets/preprocessed/preprocessed_chimi_text_dataset
      hash: md5
      md5: 232712d99f1c3237d4e740735ae4b13a.dir
      size: 460215
      nfiles: 10
  train_model:
    cmd: python src/train.py --config=params.yaml
    deps:
    - path: datasets/preprocessed/preprocessed_chimi_text_dataset
      hash: md5
      md5: 232712d99f1c3237d4e740735ae4b13a.dir
      size: 460215
      nfiles: 10
    - path: models/base-spa-mt5
      hash: md5
      md5: a2ca8ba1f6589e3fc0917596b4382e4c.dir
      size: 978096281
      nfiles: 6
    - path: src/train.py
      hash: md5
      md5: 28a687a1a9d43fb2962b325a74a0c89e
      size: 3489
    params:
      params.yaml:
        base:
          seed: 42
          base_model_path: models/base-spa-mt5
        data:
          raw_dataset: datasets/raw/chimi_text_dataset.csv
          preprocessed_dataset: datasets/preprocessed/preprocessed_chimi_text_dataset
          validation_and_test_size: 0.1
        train:
          epochs: 2
          batch_size: 8
          trained_model_path: models/chimi-text-model
          reports_path: reports/train
    outs:
    - path: models/chimi-text-model
      hash: md5
      md5: 88128b806447640d2e4163b2356fb2ce.dir
      size: 978042801
      nfiles: 7
    - path: reports/train/metrics.json
      hash: md5
      md5: ba34de5c5d24f2622e3aa6af52215c37
      size: 753
    - path: reports/train/plots/metrics
      hash: md5
      md5: 5b7754ee51343746742b8ef2ab034359.dir
      size: 807
      nfiles: 23
  evaluate_model:
    cmd: python src/eval.py --config=params.yaml
    deps:
    - path: datasets/preprocessed/preprocessed_chimi_text_dataset
      hash: md5
      md5: 232712d99f1c3237d4e740735ae4b13a.dir
      size: 460215
      nfiles: 10
    - path: models/chimi-text-model
      hash: md5
      md5: 88128b806447640d2e4163b2356fb2ce.dir
      size: 978042801
      nfiles: 7
    - path: src/eval.py
      hash: md5
      md5: 89be1d8ca18db1a6b24fb465796a74b8
      size: 1986
    params:
      params.yaml:
        base:
          seed: 42
          base_model_path: models/base-spa-mt5
        data:
          raw_dataset: datasets/raw/chimi_text_dataset.csv
          preprocessed_dataset: datasets/preprocessed/preprocessed_chimi_text_dataset
          validation_and_test_size: 0.1
        train:
          epochs: 2
          batch_size: 8
          trained_model_path: models/chimi-text-model
          reports_path: reports/train
    outs:
    - path: reports/eval/metrics.json
      hash: md5
      md5: 4c9e281699ef791fab36090c1e4148b9
      size: 412
